(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{"1due":function(t,e,n){"use strict";n.r(e),n.d(e,"StatesModule",function(){return F});var a=n("ofXK"),o=n("qFsG"),i=n("bTqV"),l=n("d3UM"),r=n("kmnG"),s=n("1jcm"),c=n("YUcS"),m=n("lDzL"),d=n("tyNb"),p=n("tk/3"),u=n("AytR"),h=n("fXoL"),g=n("XiUz"),f=n("FKr1");function x(t,e){if(1&t&&(h["\u0275\u0275elementStart"](0,"mat-option",17),h["\u0275\u0275text"](1),h["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;h["\u0275\u0275property"]("value",t.iso2),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate"](t.name)}}function S(t,e){1&t&&(h["\u0275\u0275elementStart"](0,"strong"),h["\u0275\u0275text"](1,"State"),h["\u0275\u0275elementEnd"]())}function y(t,e){1&t&&h["\u0275\u0275text"](0),2&t&&h["\u0275\u0275textInterpolate1"](" ",e.value," ")}function v(t,e){1&t&&(h["\u0275\u0275elementStart"](0,"strong"),h["\u0275\u0275text"](1,"Code"),h["\u0275\u0275elementEnd"]())}function w(t,e){1&t&&h["\u0275\u0275text"](0),2&t&&h["\u0275\u0275textInterpolate1"](" ",e.value," ")}function C(t,e){1&t&&(h["\u0275\u0275elementStart"](0,"strong"),h["\u0275\u0275text"](1,"Country Code"),h["\u0275\u0275elementEnd"]())}function b(t,e){1&t&&h["\u0275\u0275text"](0),2&t&&h["\u0275\u0275textInterpolate1"](" ",e.value," ")}function E(t,e){if(1&t){const t=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"mat-slide-toggle",20),h["\u0275\u0275listener"]("change",function(e){h["\u0275\u0275restoreView"](t);const n=h["\u0275\u0275nextContext"](),a=n.value,o=n.row;return h["\u0275\u0275nextContext"]().updateValue(e,"status",a,o)}),h["\u0275\u0275elementEnd"]()}}function I(t,e){if(1&t){const t=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"mat-slide-toggle",21),h["\u0275\u0275listener"]("change",function(e){h["\u0275\u0275restoreView"](t);const n=h["\u0275\u0275nextContext"](),a=n.value,o=n.row;return h["\u0275\u0275nextContext"]().updateValue(e,"status",a,o)}),h["\u0275\u0275elementEnd"]()}}function T(t,e){if(1&t&&(h["\u0275\u0275template"](0,E,1,0,"mat-slide-toggle",18),h["\u0275\u0275template"](1,I,1,0,"mat-slide-toggle",19)),2&t){const t=e.value;h["\u0275\u0275property"]("ngIf","active"==t),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf","inactive"==t)}}const j=[{path:"",component:(()=>{class t{constructor(t,e){this.http=t,this.router=e,this.editing={},this.rows=[],this.temp=[],this.countrySelected=!1,this.country_code="",this.searchTerms="",this.ColumnMode=m.a,this.isLoading=!1,this.total=0,this.p=1}ngOnInit(){this.getS({offset:0})}ngAfterViewInit(){this.getCountries()}getStates(t){this.isLoading=!0;let e=localStorage.getItem("authToken"),n=new p.d({Authorization:"Bearer "+e,Accept:"application/json","Content-Type":"application/json"});this.http.get(""+t,{headers:n}).subscribe(t=>{this.rows=t.data,this.total=t.total,console.log(t),this.isLoading=!1})}getS(t){this.p=t.offset;let e=t.offset+1;""!=this.country_code&&(this.url=`${u.a.apiUrl}admin/state?page=${e}&country=${this.country_code}`),""==this.country_code&&(this.url=`${u.a.apiUrl}admin/state?page=${e}`),console.log(this.url),this.getStates(this.url)}updateValue(t,e,n,a){this.isLoading=!0,this.status=1==t.checked?"active":"inactive",this.editing[a.$$index+"-"+e]=!1;let o={status:this.status};console.log(a);let i=localStorage.getItem("authToken"),l=new p.d({Authorization:"Bearer "+i,Accept:"application/json","Content-Type":"application/json"});this.http.put(`${u.a.apiUrl}admin/state/${a.id}`,o,{headers:l}).subscribe(t=>{this.getS({offset:this.p}),this.isLoading=!1})}getCountries(){let t=localStorage.getItem("authToken"),e=new p.d({Authorization:"Bearer "+t,Accept:"application/json","Content-Type":"application/json"});this.http.get(u.a.apiUrl+"admin/country?per_page=250",{headers:e}).subscribe(t=>{this.countries=t.data})}changeCountry(t){this.searchTerms="",this.country_code=t.value,this.countrySelected=!0,this.isLoading=!0;let e=localStorage.getItem("authToken"),n=new p.d({Authorization:"Bearer "+e,Accept:"application/json","Content-Type":"application/json"});this.http.get(`${u.a.apiUrl}admin/state?country=${this.country_code}&per_page=50`,{headers:n}).subscribe(t=>{this.rows=t.data,this.total=t.total,this.isLoading=!1})}changeStatus(t){this.status=t.value,this.isLoading=!0,this.searchTerms="";let e=localStorage.getItem("authToken"),n=new p.d({Authorization:"Bearer "+e,Accept:"application/json","Content-Type":"application/json"});this.http.get(`${u.a.apiUrl}admin/state?status=${this.status}&per_page=50`,{headers:n}).subscribe(t=>{this.rows=t.data,this.total=t.total,console.log(t),this.isLoading=!1})}searchChange(t){this.country_code="",this.searchTerms=t.target.value,this.isLoading=!0;let e=localStorage.getItem("authToken"),n=new p.d({Authorization:"Bearer "+e,Accept:"application/json","Content-Type":"application/json"});this.http.get(`${u.a.apiUrl}admin/state?q=${this.searchTerms}`,{headers:n}).subscribe(t=>{this.rows=t.data,this.total=t.total,console.log(t),this.isLoading=!1})}}return t.\u0275fac=function(e){return new(e||t)(h["\u0275\u0275directiveInject"](p.b),h["\u0275\u0275directiveInject"](d.f))},t.\u0275cmp=h["\u0275\u0275defineComponent"]({type:t,selectors:[["app-states"]],decls:37,vars:11,consts:[["fxLayout","row wrap",1,"col-gap"],["fxFlex.xs","100","fxFlex.sm","100","fxFlex.md","50","fxFlex.lg","50","fxFlex.xl","50",1,"column"],["appearance","outline"],["matInput","","placeholder","Search State",3,"keyup"],["fxFlex.xs","100","fxFlex.sm","100","fxFlex.md","25","fxFlex.lg","25","fxFlex.xl","25",1,"column"],["placeholder","Country",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Status",3,"selectionChange"],["value","active"],["value","inactive"],["rowHeight","auto",1,"material","striped",3,"rows","columnMode","headerHeight","footerHeight","loadingIndicator","externalPaging","count","offset","limit","page"],["prop","name"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["prop","iso2"],["prop","country_code"],["name","status",3,"maxWidth"],[3,"value"],["checked","","color","primary",3,"change",4,"ngIf"],[3,"change",4,"ngIf"],["checked","","color","primary",3,"change"],[3,"change"]],template:function(t,e){1&t&&(h["\u0275\u0275elementStart"](0,"div",0),h["\u0275\u0275elementStart"](1,"div",1),h["\u0275\u0275elementStart"](2,"mat-form-field",2),h["\u0275\u0275elementStart"](3,"mat-label"),h["\u0275\u0275text"](4,"Search by State"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"input",3),h["\u0275\u0275listener"]("keyup",function(t){return e.searchChange(t)}),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"div",4),h["\u0275\u0275elementStart"](7,"mat-form-field",2),h["\u0275\u0275elementStart"](8,"mat-label"),h["\u0275\u0275text"](9,"Filter By Country"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](10,"mat-select",5),h["\u0275\u0275listener"]("selectionChange",function(t){return e.changeCountry(t)}),h["\u0275\u0275elementStart"](11,"mat-option"),h["\u0275\u0275text"](12,"Select Country"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](13,x,2,2,"mat-option",6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"div",4),h["\u0275\u0275elementStart"](15,"mat-form-field",2),h["\u0275\u0275elementStart"](16,"mat-label"),h["\u0275\u0275text"](17,"Filter By Status"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"mat-select",7),h["\u0275\u0275listener"]("selectionChange",function(t){return e.changeStatus(t)}),h["\u0275\u0275elementStart"](19,"mat-option"),h["\u0275\u0275text"](20,"Select Status"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"mat-option",8),h["\u0275\u0275text"](22,"Active"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](23,"mat-option",9),h["\u0275\u0275text"](24,"Inactive"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"ngx-datatable",10),h["\u0275\u0275listener"]("page",function(t){return e.getS(t)}),h["\u0275\u0275elementStart"](26,"ngx-datatable-column",11),h["\u0275\u0275template"](27,S,2,0,"ng-template",12),h["\u0275\u0275template"](28,y,1,1,"ng-template",13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](29,"ngx-datatable-column",14),h["\u0275\u0275template"](30,v,2,0,"ng-template",12),h["\u0275\u0275template"](31,w,1,1,"ng-template",13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"ngx-datatable-column",15),h["\u0275\u0275template"](33,C,2,0,"ng-template",12),h["\u0275\u0275template"](34,b,1,1,"ng-template",13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](35,"ngx-datatable-column",16),h["\u0275\u0275template"](36,T,2,2,"ng-template",13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&t&&(h["\u0275\u0275advance"](13),h["\u0275\u0275property"]("ngForOf",e.countries),h["\u0275\u0275advance"](12),h["\u0275\u0275property"]("rows",e.rows)("columnMode",e.ColumnMode.force)("headerHeight",50)("footerHeight",50)("loadingIndicator",e.isLoading)("externalPaging",!0)("count",e.total)("offset",e.p)("limit",15),h["\u0275\u0275advance"](10),h["\u0275\u0275property"]("maxWidth",80))},directives:[g.c,g.a,r.c,r.g,o.b,l.a,f.o,a.n,m.e,m.c,m.d,m.b,a.o,s.a],styles:["mat-form-field[_ngcontent-%COMP%]{width:98%}"]}),t})()}];let F=(()=>{class t{}return t.\u0275mod=h["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[a.c,d.i.forChild(j),o.c,i.c,l.b,r.e,s.b,c.a,m.f]]}),t})()}}]);